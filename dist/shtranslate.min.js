angular.module("shTranslate",[]),angular.module("shTranslate").directive("shTranslation",["I18NLang","$compile","$parse",function(n,r,e){return{restrict:"A",link:function(r,e,t){var a,i=(t.shTranslationLocale,t.shTranslation.split(","));r.i18n=r.i18n||{};for(var o in t)a=o.match(/shTranslation([A-Z].*)/),a&&a.length>1&&i.push(t[o]);for(var s=0;s<i.length;s++)!function(e){Object.defineProperty(r.i18n,e.replace(/\./g,"_"),{get:function(){return n.format(e)}})}(i[s])}}}]),angular.module("shTranslate").provider("I18NLang",[function(){function n(n){if(!angular.isString(n))throw new Error("Locale should be a string");if(!/[a-z]{2}-[A-Z]{2}/.test(n))throw new Error("Locale should be an ISO-compliant string i.e. en-GB")}function r(n){if(!angular.isString(n))throw new Error("The provided URL isn't a string")}var e={},t="en-US",a=!0,i={},o="en-US";this.addRepository=function(t,a){if(angular.isObject(t))for(var o in t)angular.isObject(t[o])?i[o]=t[o]:e[o]=t[o];else n(t),angular.isObject(a)?i[t]=a:(r(a),e[t]=a)},this.setLocale=function(r){n(r),t=r},this.setFallbackLocale=function(r){n(r),o=r},this.setLoadLazily=function(n){a=n},this.$get=["$http","$q",function(n,r){function a(n,r){for(var e=r.split("."),t=n,a=null;t&&(a=e.shift());)t=t[a];return t}function s(n){var r,e,t,a=0;if(0==n.length)return a;for(r=0,t=n.length;t>r;r++)e=n.charCodeAt(r),a=(a<<5)-a+e,a|=0;return a}function u(r,e){return n.get(e).success(function(n){i[r]=n})}function l(){var n;i[t]||(n=e[t],n&&u(t,n).then(function(){h=!0,f.resolve()})),i[o]||(n=e[o],n&&n!=e[t]&&u(o,n).then(function(){g=!0}))}var c={},f=r.defer(),g=!1,h=!1,d={ready:function(){return f.promise},isLocaleLoaded:function(){return h},isFallbackLocaleLoaded:function(){return g},setLocale:function(n){t=n,u(n,e[n])},format:function(n,r,e){var u=e||t,l=r?u+n+JSON.stringify(r):u+n,f=s(l),g=u?i[u]:i[t]?i[t]:i[o]?i[o]:null,h=a(g,n);if(c[""+f])return c[""+f];if(h){if(!angular.isDefined(r))return c[""+f]=h,h;if(angular.isArray(r)){if(c[""+f])return c[""+f];for(var d=0,e=r.length;e>d;d++)h=h.replace("?",r[d])}else if(angular.isObject(r))for(var n in r)h=h.replace(new RegExp(":"+n,"ig"),a(r,n));c[""+f]=h}return h},get:function(){var n,r,e;switch(arguments.length){case 0:throw new Error("No parameters passed to translate method");case 1:angular.isObject(arguments[0])?(n=arguments[0].locale,r=arguments[0].key,e=arguments[0].replacements||{}):r=arguments[0];break;case 2:r=arguments[0],e=arguments[1];break;case 3:n=arguments[0],r=arguments[1],e=arguments[2]}var a={translate:function(){return d.format(r,e,n||t)}};return Object.defineProperty(a,"value",{get:function(){return this.translate()}}),a}};return l(),Object.defineProperty(d,"LOCALE",{get:function(){return t}}),d}]}]);